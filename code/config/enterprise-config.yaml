#==============================================================================
# Enterprise Server Deployment System - Central Configuration
# Version: 9.0.0 Enterprise
# Date: 2025-12-09
#==============================================================================

system:
  name: "Enterprise Server Deploy"
  version: "9.0.0"
  environment: "production"  # production, staging, development
  log_level: "INFO"          # DEBUG, INFO, WARN, ERROR, CRITICAL
  timezone: "UTC"
  locale: "ru_RU.UTF-8"

# Пути системы
paths:
  base: "/opt/enterprise-deploy"
  code: "/opt/enterprise-deploy/code"
  lib: "/opt/enterprise-deploy/lib"
  config: "/opt/enterprise-deploy/config"
  data: "/srv/enterprise-data"
  logs: "/var/log/enterprise-deploy"
  backups: "/srv/backups"
  temp: "/tmp/enterprise-deploy"
  projects: "/srv/projects"

# Модули и их зависимости
modules:
  core:
    - name: "logging"
      enabled: true
      priority: 1
      dependencies: []
    - name: "validation"
      enabled: true
      priority: 2
      dependencies: ["logging"]
    - name: "config-manager"
      enabled: true
      priority: 3
      dependencies: ["logging", "validation"]
  
  infrastructure:
    - name: "vscode-server"
      enabled: true
      priority: 10
      port: 8443
      dependencies: ["core"]
      auto_start: true
    - name: "docker-manager"
      enabled: true
      priority: 11
      dependencies: ["core"]
    - name: "database-manager"
      enabled: true
      priority: 12
      dependencies: ["core", "docker-manager"]
  
  monitoring:
    - name: "prometheus"
      enabled: true
      priority: 20
      port: 9090
      dependencies: ["core"]
    - name: "grafana"
      enabled: true
      priority: 21
      port: 3000
      dependencies: ["prometheus"]
    - name: "alertmanager"
      enabled: true
      priority: 22
      port: 9093
      dependencies: ["prometheus"]
  
  automation:
    - name: "telegram-bots"
      enabled: true
      priority: 30
      dependencies: ["core", "monitoring"]
    - name: "ci-cd-pipeline"
      enabled: true
      priority: 31
      dependencies: ["core", "docker-manager"]
    - name: "backup-automation"
      enabled: true
      priority: 32
      dependencies: ["core"]

# Профили развертывания
deployment_profiles:
  minimal:
    description: "Минимальная установка для разработки"
    modules: ["logging", "validation", "config-manager"]
    resources:
      cpu_cores: 2
      ram_gb: 4
      disk_gb: 20
  
  standard:
    description: "Стандартная установка для малого бизнеса"
    modules: ["logging", "validation", "config-manager", "vscode-server", "docker-manager", "prometheus"]
    resources:
      cpu_cores: 4
      ram_gb: 8
      disk_gb: 50
  
  professional:
    description: "Профессиональная установка для средних команд"
    modules: ["logging", "validation", "config-manager", "vscode-server", "docker-manager", 
              "database-manager", "prometheus", "grafana", "telegram-bots"]
    resources:
      cpu_cores: 8
      ram_gb: 16
      disk_gb: 100
  
  enterprise:
    description: "Полная установка для enterprise"
    modules: ["*"]  # Все модули
    resources:
      cpu_cores: 16
      ram_gb: 32
      disk_gb: 500
    high_availability: true
    multi_region: true
    auto_scaling: true

# Интеграции между модулями
integrations:
  vscode_git:
    enabled: true
    pre_commit_hooks: true
    git_lfs: true
    auto_format: true
  
  docker_monitoring:
    enabled: true
    prometheus_exporter: true
    log_aggregation: true
  
  telegram_all:
    enabled: true
    notifications: true
    commands: true
    webhooks: true
  
  backup_all:
    enabled: true
    schedule: "0 3 * * *"  # 3:00 AM daily
    retention_days: 30
    cloud_sync: false
    encryption: true

# Безопасность
security:
  firewall:
    enabled: true
    default_policy: "DROP"
    ssh_port: 22
    allowed_ports: [80, 443, 8443, 9090, 3000]
  
  authentication:
    method: "keyring"  # keyring, vault, plaintext
    mfa_enabled: false
    session_timeout: 3600
  
  encryption:
    at_rest: true
    in_transit: true
    algorithm: "AES-256-GCM"
  
  audit:
    enabled: true
    log_all_commands: true
    log_file: "/var/log/enterprise-deploy/audit.log"

# Мониторинг и алерты
monitoring:
  metrics:
    collection_interval: 15  # seconds
    retention_days: 90
  
  health_checks:
    enabled: true
    interval: 30  # seconds
    timeout: 5
    retries: 3
  
  alerts:
    cpu_threshold: 85
    memory_threshold: 90
    disk_threshold: 80
    response_time_threshold: 1000  # ms
    
  notification_channels:
    - type: "telegram"
      enabled: true
      priority: "high"
    - type: "email"
      enabled: false
      priority: "medium"
    - type: "slack"
      enabled: false
      priority: "low"

# Автоматизация
automation:
  auto_updates:
    enabled: true
    schedule: "0 4 * * 0"  # 4:00 AM every Sunday
    auto_restart: false
    
  auto_backup:
    enabled: true
    schedule: "0 3 * * *"
    incremental: true
    compression: "zstd"
    
  auto_scaling:
    enabled: false
    min_instances: 1
    max_instances: 5
    cpu_target: 70
    
  self_healing:
    enabled: true
    restart_on_failure: true
    max_restarts: 3
    restart_delay: 60

# Производительность
performance:
  caching:
    enabled: true
    ttl: 300  # seconds
    backend: "redis"  # redis, memory, file
    
  parallelization:
    enabled: true
    max_workers: 8
    
  optimization:
    compile_python: true
    use_jit: false
    aggressive_caching: true

# Логирование
logging:
  format: "json"  # json, text, syslog
  outputs:
    - type: "file"
      path: "/var/log/enterprise-deploy/system.log"
      max_size_mb: 100
      max_files: 10
    - type: "syslog"
      enabled: false
      host: "localhost"
      port: 514
    - type: "elasticsearch"
      enabled: false
      host: "localhost"
      port: 9200
  
  levels:
    core: "INFO"
    modules: "INFO"
    integrations: "DEBUG"
    bots: "INFO"

# Telegram боты
telegram_bots:
  devops_manager:
    enabled: true
    token_env: "TELEGRAM_BOT_DEVOPS_TOKEN"
    admin_ids_env: "TELEGRAM_ADMIN_IDS"
    features:
      - "deployment"
      - "monitoring"
      - "logs"
      - "commands"
      
  security_auditor:
    enabled: true
    token_env: "TELEGRAM_BOT_SECURITY_TOKEN"
    features:
      - "vulnerability_scan"
      - "access_audit"
      - "compliance_check"
      
  backup_manager:
    enabled: true
    token_env: "TELEGRAM_BOT_BACKUP_TOKEN"
    features:
      - "backup_status"
      - "restore"
      - "schedule"
      
  monitoring_bot:
    enabled: true
    token_env: "TELEGRAM_BOT_MONITORING_TOKEN"
    features:
      - "alerts"
      - "metrics"
      - "dashboards"
      
  cicd_bot:
    enabled: true
    token_env: "TELEGRAM_BOT_CICD_TOKEN"
    features:
      - "build"
      - "deploy"
      - "rollback"

# Расширенные функции
advanced:
  blue_green_deployment:
    enabled: false
    health_check_url: "/health"
    cutover_delay: 30
    
  canary_deployment:
    enabled: false
    traffic_percentage: 10
    duration_minutes: 30
    
  circuit_breaker:
    enabled: true
    failure_threshold: 5
    timeout: 30
    half_open_requests: 3
    
  rate_limiting:
    enabled: true
    requests_per_minute: 1000
    burst: 100
    
  distributed_tracing:
    enabled: false
    backend: "jaeger"
    sampling_rate: 0.1

# Экспериментальные функции
experimental:
  ai_diagnostics:
    enabled: false
    model: "gpt-4"
    api_key_env: "OPENAI_API_KEY"
    
  predictive_scaling:
    enabled: false
    ml_model: "lstm"
    
  auto_optimization:
    enabled: false
    learning_rate: 0.01

# Метаданные
metadata:
  created_at: "2025-12-09"
  updated_at: "2025-12-09"
  author: "Sandrick Tech"
  license: "MIT"
  repository: "https://github.com/your-repo/enterprise-deploy"
