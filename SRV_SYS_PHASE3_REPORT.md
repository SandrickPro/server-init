# üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢: –§–ê–ó–ê 3 - –ì–õ–£–ë–û–ö–ê–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

> **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ /srv/sys/**  
> –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 2024-12-09 | –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 100%

---

## üìä EXECUTIVE SUMMARY

### –¶–µ–ª—å —Ñ–∞–∑—ã 3
**"–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –≥–ª—É–±–æ–∫–æ, –ø—Ä–µ–¥–ª–æ–∂–∏ –∏ —Ä–µ–∞–ª–∏–∑—É–π –≥–∏–±–∫—É—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —Å–æ–±–æ–π. –°–¥–µ–ª–∞–π –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Ç–æ–º, —á—Ç–æ –≤—Å—ë —á—Ç–æ —Å—Ç–∞–≤–∏—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ /srv/sys/"**

### –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ **–¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê –ù–ê 100%**

–°–æ–∑–¥–∞–Ω–∞ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ **SRV-SYS Integration System v1.0**, –∫–æ—Ç–æ—Ä–∞—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É `/srv/sys/`
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–µ–∂–¥—É —Å–æ–±–æ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∑–¥–æ—Ä–æ–≤—å–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
- –†–∞—Å—à–∏—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —Ö—É–∫–æ–≤

---

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### 1. srv-sys-integrator.sh
**1100+ —Å—Ç—Ä–æ–∫** | Bash | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `/srv/sys/` (35+ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º (Service Registry)
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (11 —Ç–∏–ø–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (iptables, SID, win_config, security)
- ‚úÖ –ê–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ (Nginx, MySQL, PostgreSQL, Redis)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∏ `/srv/sys/`
- ‚úÖ Health Check –≤—Å–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
- ‚úÖ Hooks System (pre/post deploy/update)
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`--init`, `--check`, `--report`, `--backup`)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
```bash
# Service Registry —á–µ—Ä–µ–∑ JSON –º–∞–Ω–∏—Ñ–µ—Å—Ç
manifest.json ‚Üí —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

# –ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–º–∞–Ω–¥
command -v nginx ‚Üí nginx –æ–±–Ω–∞—Ä—É–∂–µ–Ω ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∏–º–ª–∏–Ω–∫–∏
/srv/sys/scripts/iptables-controller.sh ‚Üí /usr/local/bin/iptables-controller

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∏–º–ª–∏–Ω–∫–∏ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥–∏
/srv/sys/configs/nginx/nginx.conf ‚Üí /etc/nginx/conf.d/srv-sys.conf
```

### 2. srv-sys-master.conf
**600+ —Å—Ç—Ä–æ–∫** | Shell Config | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**14 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
1. ‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤–µ—Ä—Å–∏—è, —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
2. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (35+ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π)
3. ‚úÖ –°–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (IP, hostname, DNS, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
4. ‚úÖ SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–æ—Ä—Ç, gate, SID, win_config)
5. ‚úÖ iptables –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ä–µ–∂–∏–º, –ø–æ–ª–∏—Ç–∏–∫–∏, IPv6)
6. ‚úÖ –ü–æ—Ä—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (30+ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤)
7. ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (workers, timeouts, SSL/TLS, gzip)
8. ‚úÖ MySQL/MariaDB –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (bind, connections, buffers)
9. ‚úÖ PostgreSQL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (listen, buffers, SSL)
10. ‚úÖ Redis –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (memory, persistence)
11. ‚úÖ Fail2Ban –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (bantime, jails)
12. ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ (retention, schedule, compression)
13. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Email, Telegram, Slack, –∞—É–¥–∏—Ç)
14. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (auto_sync, hooks, health_check)

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—É—Ä–æ–≤–Ω–∏, rate limiting, GeoIP, port knocking)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (swappiness, TCP, file descriptors)
- Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (networks, volumes, registry)
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ (debug, verbose, dry-run)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –í –ª—é–±–æ–º —Å–∫—Ä–∏–ø—Ç–µ
source /srv/sys/srv-sys-master.conf

# –î–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
echo $SRV_SYS_SSH_PORT           # SSH –ø–æ—Ä—Ç
echo $SRV_SYS_CONFIGS_NGINX      # –ü—É—Ç—å –∫ Nginx –∫–æ–Ω—Ñ–∏–≥–∞–º
echo $SRV_SYS_IPTABLES_ENABLED   # –°—Ç–∞—Ç—É—Å iptables
```

### 3. SRV_SYS_INTEGRATION_GUIDE.md
**3600+ —Å—Ç—Ä–æ–∫** | Markdown | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**8 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤:**

#### 1. –í–≤–µ–¥–µ–Ω–∏–µ (300 —Å—Ç—Ä–æ–∫)
- –ß—Ç–æ —Ç–∞–∫–æ–µ SRV-SYS Integration System
- –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ (7 –ø—É–Ω–∫—Ç–æ–≤)
- –î–ª—è –∫–æ–≥–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ

#### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (800 —Å—Ç—Ä–æ–∫)
- –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π `/srv/sys/` –≤ ASCII-art
- –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã:
  - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏—Å—Ç–∏–Ω—ã (master.conf)
  - Service Registry (manifest.json)
  - –ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
  - –ê–≤—Ç–æ–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã (600 —Å—Ç—Ä–æ–∫)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
  - srv-sys-integrator.sh
  - srv-sys-master.conf
  - manifest.json
  - iptables-controller.sh
  - ssh-sid-system.sh
  - win-config-automation.sh

#### 4. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (400 —Å—Ç—Ä–æ–∫)
- –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü–µ—Ä–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### 5. –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (800 —Å—Ç—Ä–æ–∫)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (2 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞)
- Hooks System (—Å–æ–∑–¥–∞–Ω–∏–µ pre/post —Ö—É–∫–æ–≤)
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ (–∞–≤—Ç–æ + —Ä—É—á–Ω—ã–µ)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

#### 6. API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (500 —Å—Ç—Ä–æ–∫)
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—ã–∑–æ–≤ —Ö—É–∫–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

#### 7. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (400 —Å—Ç—Ä–æ–∫)
- **–ö–µ–π—Å 1:** –î–µ–ø–ª–æ–π –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)
- **–ö–µ–π—Å 2:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH Gate (–ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)
- **–ö–µ–π—Å 3:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã (–ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å Telegram)

#### 8. Troubleshooting (300 —Å—Ç—Ä–æ–∫)
- 4 —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ—à–µ–Ω–∏—è–º–∏:
  - –ú–∞–Ω–∏—Ñ–µ—Å—Ç –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è
  - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
  - Health check fails

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Best Practices (4 –ø—Ä–∞–≤–∏–ª–∞)
- –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ /srv/sys/

```
/srv/sys/                                    # üè† –ö–û–†–ï–ù–¨ –°–ò–°–¢–ï–ú–´
‚îÇ
‚îú‚îÄ‚îÄ üìã manifest.json                         # Service Registry
‚îú‚îÄ‚îÄ ‚öôÔ∏è srv-sys-master.conf                   # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
‚îÇ
‚îú‚îÄ‚îÄ üìÅ configs/                              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf                       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sites-available/                 # –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sites-enabled/ ‚Üí —Å–∏–º–ª–∏–Ω–∫–∏        # –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∞–π—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ snippets/                        # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ mysql/custom.cnf
‚îÇ   ‚îú‚îÄ‚îÄ postgresql/custom.conf
‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îú‚îÄ‚îÄ mongodb/
‚îÇ   ‚îú‚îÄ‚îÄ fail2ban/
‚îÇ   ‚îî‚îÄ‚îÄ ssh/
‚îÇ
‚îú‚îÄ‚îÄ üî• iptables/                             # –ú–æ–¥—É–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ firewall
‚îÇ   ‚îú‚îÄ‚îÄ v4/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 00-base.v4                       # –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 10-ssh.v4                        # SSH
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 20-web.v4                        # HTTP/HTTPS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 30-database.v4                   # –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 40-custom.v4                     # –ö–∞—Å—Ç–æ–º–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ combined.v4                      # ‚Üê –ì–ï–ù–ï–†–ò–†–£–ï–¢–°–Ø –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
‚îÇ   ‚îî‚îÄ‚îÄ v6/combined.v6
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è systemd/system/                       # systemd units
‚îÇ   ‚îú‚îÄ‚îÄ iptables-restore.service             # –ê–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ firewall
‚îÇ   ‚îú‚îÄ‚îÄ ssh-session@.service                 # SID –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ srv-sys-sync.service                 # –ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üîê ssh/                                   # SSH —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ win_config/                          # Windows –∫–æ–Ω—Ñ–∏–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config                           # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.d/                        # –ú–æ–¥—É–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ ssh_session/                         # SID –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ active/                          # –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ archive/                         # –ê—Ä—Ö–∏–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metadata/                        # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ sshd_config.d/                       # sshd –º–æ–¥—É–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ authorized_keys/                     # SSH –∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ üíæ backups/                              # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ configs/
‚îÇ   ‚îú‚îÄ‚îÄ iptables/
‚îÇ   ‚îî‚îÄ‚îÄ ssh/
‚îÇ
‚îú‚îÄ‚îÄ üìú scripts/                              # –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ iptables-controller.sh ‚Üí /usr/local/bin/iptables-controller
‚îÇ   ‚îú‚îÄ‚îÄ ssh-sid-system.sh ‚Üí /usr/local/bin/ssh-sid
‚îÇ   ‚îú‚îÄ‚îÄ win-config.sh ‚Üí /usr/local/bin/win-config
‚îÇ   ‚îú‚îÄ‚îÄ security-hardening.sh ‚Üí /usr/local/bin/security-hardening
‚îÇ   ‚îú‚îÄ‚îÄ deploy/
‚îÇ   ‚îú‚îÄ‚îÄ maintenance/
‚îÇ   ‚îî‚îÄ‚îÄ monitoring/
‚îÇ
‚îú‚îÄ‚îÄ üìä logs/                                 # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ integrator.log                       # –õ–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ changes.log                          # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ audit.log                            # –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ nginx-access.log
‚îÇ   ‚îú‚îÄ‚îÄ nginx-error.log
‚îÇ   ‚îú‚îÄ‚îÄ mysql-error.log
‚îÇ   ‚îî‚îÄ‚îÄ postgresql.log
‚îÇ
‚îî‚îÄ‚îÄ ü™ù hooks/                                # –°–∏—Å—Ç–µ–º–∞ —Ö—É–∫–æ–≤
    ‚îú‚îÄ‚îÄ pre-deploy/
    ‚îÇ   ‚îî‚îÄ‚îÄ 00-backup.sh                     # –ê–≤—Ç–æ–±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
    ‚îú‚îÄ‚îÄ post-deploy/
    ‚îÇ   ‚îî‚îÄ‚îÄ 00-reload.sh                     # –†–µ–ª–æ–∞–¥ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ—Å–ª–µ
    ‚îú‚îÄ‚îÄ pre-update/
    ‚îî‚îÄ‚îÄ post-update/
        ‚îî‚îÄ‚îÄ 10-notify.sh                     # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### 1. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏—Å—Ç–∏–Ω—ã**
```
srv-sys-master.conf
        ‚Üì
  –í–°–ï –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–∏—Ç–∞—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—Å—é–¥–∞
        ‚Üì
SRV_SYS_SSH_PORT="2222"
SRV_SYS_NGINX_WORKER_PROCESSES="4"
```

#### 2. **Service Registry**
```json
manifest.json {
  "components": {
    "nginx": {"enabled": true, "port": 80},
    "mysql": {"enabled": true, "port": 3306},
    "ssh": {"enabled": true, "port": 2222, "gate_enabled": true}
  }
}
```

–õ—é–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å:
```bash
# SSH —É–∑–Ω–∞—ë—Ç –æ MySQL
MYSQL_PORT=$(jq -r '.components.mysql.port' /srv/sys/manifest.json)

# iptables —É–∑–Ω–∞—ë—Ç –æ–± SSH Gate
SSH_GATE=$(jq -r '.components.ssh.gate_enabled' /srv/sys/manifest.json)
```

#### 3. **–ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ**
```bash
discover_services() {
    for service in nginx mysql postgresql redis; do
        if command -v $service &>/dev/null; then
            # –û–±–Ω–∞—Ä—É–∂–µ–Ω ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ
            jq ".components.$service.enabled = true" manifest.json
            
            # –ê–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º
            auto_configure_$service
            
            # –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º
            integrate_$service
        fi
    done
}
```

#### 4. **–ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
```bash
# –ò–∑–º–µ–Ω–∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥ Nginx –≤ /srv/sys/configs/nginx/nginx.conf
vim /srv/sys/configs/nginx/nginx.conf

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
./srv-sys-integrator.sh --sync
    ‚Üì
# –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–∏–º–ª–∏–Ω–∫
ln -sf /srv/sys/configs/nginx/nginx.conf /etc/nginx/conf.d/srv-sys.conf
    ‚Üì
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
nginx -t
    ‚Üì
# –†–µ–ª–æ–∞–¥
systemctl reload nginx
```

#### 5. **Hooks System**
```bash
# –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

PRE-DEPLOY:
  ‚Üí hooks/pre-deploy/00-backup.sh     # –°–æ–∑–¥–∞—ë—Ç –±—ç–∫–∞–ø
  ‚Üí hooks/pre-deploy/10-validate.sh   # –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏

DEPLOY:
  ‚Üí –í–∞—à –∫–æ–¥ –¥–µ–ø–ª–æ—è

POST-DEPLOY:
  ‚Üí hooks/post-deploy/00-reload.sh    # –†–µ–ª–æ–∞–¥ —Å–µ—Ä–≤–∏—Å–æ–≤
  ‚Üí hooks/post-deploy/10-notify.sh    # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

---

## üîÑ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

```
‚ùå –ü–†–û–ë–õ–ï–ú–´:

server-deploy-v5-enhanced.sh
    ‚îú‚îÄ‚îÄ –°–≤–æ–∏ –ø—É—Ç–∏: STATE_FILE="/srv/sys/.deployment_state.json"
    ‚îî‚îÄ‚îÄ –ù–µ –∑–Ω–∞–µ—Ç –æ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

srv-sys-iptables-controller.sh
    ‚îú‚îÄ‚îÄ –°–≤–æ–∏ –ø—É—Ç–∏: BASE_DIR="/srv/sys"
    ‚îú‚îÄ‚îÄ –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—ë—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    ‚îî‚îÄ‚îÄ –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

ssh-sid-system.sh
    ‚îú‚îÄ‚îÄ –°–≤–æ–∏ –ø—É—Ç–∏: SESSION_DIR="/srv/sys/ssh/ssh_session"
    ‚îî‚îÄ‚îÄ –ù–µ –∑–Ω–∞–µ—Ç –æ SSH –ø–æ—Ä—Ç–µ –∏–∑ iptables

win-config-automation.sh
    ‚îú‚îÄ‚îÄ –°–≤–æ–∏ –ø—É—Ç–∏: WIN_CONFIG_DIR="/srv/sys/ssh/win_config"
    ‚îî‚îÄ‚îÄ –ù–µ –∑–Ω–∞–µ—Ç –æ gate-—Å–µ—Ä–≤–µ—Ä–µ
```

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

```
‚úÖ –†–ï–®–ï–ù–ò–ï:

srv-sys-integrator.sh (–ö–û–û–†–î–ò–ù–ê–¢–û–†)
    ‚Üì
source srv-sys-master.conf (–ï–î–ò–ù–´–ô –ö–û–ù–§–ò–ì)
    ‚Üì
manifest.json (SERVICE REGISTRY)
    ‚Üì
–í–°–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–´:

iptables-controller.sh
    ‚îú‚îÄ‚îÄ source /srv/sys/srv-sys-master.conf
    ‚îú‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç: $SRV_SYS_IPTABLES_V4
    ‚îú‚îÄ‚îÄ –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ SSH –ø–æ—Ä—Ç–∞ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç manifest.json
    ‚îî‚îÄ‚îÄ SID —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

ssh-sid-system.sh
    ‚îú‚îÄ‚îÄ source /srv/sys/srv-sys-master.conf
    ‚îú‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç SSH –ø–æ—Ä—Ç: $SRV_SYS_SSH_PORT
    ‚îú‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç –∏–∑ manifest.json: gate_enabled
    ‚îî‚îÄ‚îÄ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å win_config

win-config-automation.sh
    ‚îú‚îÄ‚îÄ source /srv/sys/srv-sys-master.conf
    ‚îú‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç gate_user: $SRV_SYS_SSH_GATE_USER
    ‚îú‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç gate_ip –∏–∑ manifest.json
    ‚îî‚îÄ‚îÄ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

security-hardening-advanced.sh
    ‚îú‚îÄ‚îÄ source /srv/sys/srv-sys-master.conf
    ‚îú‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å: $SRV_SYS_SECURITY_LEVEL
    ‚îú‚îÄ‚îÄ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ iptables —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
    ‚îî‚îÄ‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç sysctl —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

## üìà –ü–†–ò–ú–ï–†–´ –†–ê–ë–û–¢–´

### –ü—Ä–∏–º–µ—Ä 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
#!/bin/bash
# deploy_app.sh - –î–µ–ø–ª–æ–π —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π

source /srv/sys/srv-sys-master.conf

APP_NAME="webapp"
APP_PORT="8080"

# 1. PRE-DEPLOY HOOKS ‚Üí –∞–≤—Ç–æ–±—ç–∫–∞–ø
echo "‚Üí –í—ã–ø–æ–ª–Ω—è–µ–º pre-deploy —Ö—É–∫–∏..."
for hook in /srv/sys/hooks/pre-deploy/*.sh; do
    bash "$hook"
done
# –†–µ–∑—É–ª—å—Ç–∞—Ç: /srv/sys/backups/pre-deploy-20241209_143000.tar.gz

# 2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ SERVICE REGISTRY
jq --arg app "$APP_NAME" --arg port "$APP_PORT" \
   '.services[$app] = {"port": $port | tonumber}' \
   "$SRV_SYS_MANIFEST" > /tmp/manifest.json
mv /tmp/manifest.json "$SRV_SYS_MANIFEST"

# 3. –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç –≤ IPTABLES (–∞–≤—Ç–æ–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
/srv/sys/scripts/iptables-controller.sh --add-port "$APP_PORT" --tcp
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 
#   - –°–æ–∑–¥–∞–Ω /srv/sys/iptables/v4/50-webapp.v4
#   - –û–±–Ω–æ–≤–ª—ë–Ω combined.v4
#   - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ iptables-restore

# 4. –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥ NGINX (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
cat > "$SRV_SYS_CONFIGS_NGINX/sites-available/$APP_NAME.conf" <<EOF
server {
    listen 80;
    server_name $APP_NAME.example.com;
    location / {
        proxy_pass http://localhost:$APP_PORT;
    }
}
EOF

# 5. –í–∫–ª—é—á–∞–µ–º —Å–∞–π—Ç (—Å–∏–º–ª–∏–Ω–∫)
ln -sf "$SRV_SYS_CONFIGS_NGINX/sites-available/$APP_NAME.conf" \
       "$SRV_SYS_CONFIGS_NGINX/sites-enabled/"

# 6. POST-DEPLOY HOOKS ‚Üí —Ä–µ–ª–æ–∞–¥ —Å–µ—Ä–≤–∏—Å–æ–≤
for hook in /srv/sys/hooks/post-deploy/*.sh; do
    bash "$hook"
done
# –†–µ–∑—É–ª—å—Ç–∞—Ç:
#   - systemctl daemon-reload
#   - iptables-restore < combined.v4
#   - nginx -t && systemctl reload nginx

echo "‚úì –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ $APP_NAME –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ"
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH Gate

```bash
#!/bin/bash
# setup_gate.sh

source /srv/sys/srv-sys-master.conf

# 1. –í–∫–ª—é—á–∞–µ–º Gate –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥–µ
sed -i 's/SRV_SYS_SSH_GATE_ENABLED="false"/SRV_SYS_SSH_GATE_ENABLED="true"/' \
    /srv/sys/srv-sys-master.conf

# 2. –û–±–Ω–æ–≤–ª—è–µ–º SERVICE REGISTRY
jq '.components.ssh.gate_enabled = true | 
    .components.ssh.gate_user = "gate" | 
    .components.ssh.gate_ip = "192.168.1.100"' \
   "$SRV_SYS_MANIFEST" > /tmp/manifest.json
mv /tmp/manifest.json "$SRV_SYS_MANIFEST"

# 3. Win_Config –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò —É–∑–Ω–∞—ë—Ç –æ Gate
/srv/sys/scripts/win-config.sh --regenerate
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ–Ω—Ñ–∏–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å ProxyJump —á–µ—Ä–µ–∑ gate@192.168.1.100

# 4. SID —Å–∏—Å—Ç–µ–º–∞ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ª–æ–≥–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ Gate
# (—á–∏—Ç–∞–µ—Ç gate_enabled –∏–∑ manifest.json)
/srv/sys/scripts/ssh-sid.sh --status
# –†–µ–∑—É–ª—å—Ç–∞—Ç: SID —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É—á—ë—Ç–æ–º Gate

# 5. iptables –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç forwarding
# (—á–∏—Ç–∞–µ—Ç gate_enabled –∏–∑ manifest.json)
```

### –ü—Ä–∏–º–µ—Ä 3: Health Check –∏ –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
#!/bin/bash
# health_monitor.sh

source /srv/sys/srv-sys-master.conf

# 1. –ó–∞–ø—É—Å–∫–∞–µ–º Health Check
./srv-sys-integrator.sh --check
if [[ $? -ne 0 ]]; then
    # 2. –ü—Ä–æ–±–ª–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã ‚Üí –ª–æ–≥–∏—Ä—É–µ–º
    echo "$(date): Health check failed" >> "$SRV_SYS_LOGS/audit.log"
    
    # 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    if [[ "$SRV_SYS_NOTIFY_TELEGRAM_ENABLED" == "true" ]]; then
        curl -s -X POST \
            "https://api.telegram.org/bot$SRV_SYS_NOTIFY_TELEGRAM_BOT_TOKEN/sendMessage" \
            -d "chat_id=$SRV_SYS_NOTIFY_TELEGRAM_CHAT_ID" \
            -d "text=üî¥ Health check failed –Ω–∞ $(hostname)"
    fi
    
    # 4. –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
    if [[ "$SRV_SYS_AUTO_RECOVERY_ENABLED" == "true" ]]; then
        echo "–ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è..."
        
        # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
        LAST_BACKUP=$(ls -1t "$SRV_SYS_BACKUPS"/*.tar.gz | head -1)
        tar -xzf "$LAST_BACKUP" -C /
        
        # –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        ./srv-sys-integrator.sh --sync
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–Ω–æ–≤–∞
        ./srv-sys-integrator.sh --check && \
            echo "‚úì –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ"
    fi
fi
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ï–ö–¢–ê

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–§–∞–∑—ã 1-3)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  –ü–†–û–ï–ö–¢: SERVER-INIT                        ‚îÇ
‚îÇ                  –ü–µ—Ä–∏–æ–¥: –ù–æ—è–±—Ä—å - –î–µ–∫–∞–±—Ä—å 2024              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üìÅ –§–ê–ô–õ–û–í –°–û–ó–î–ê–ù–û:        24 —Ñ–∞–π–ª–∞
üìù –°–¢–†–û–ö –ö–û–î–ê:            18,839+ —Å—Ç—Ä–æ–∫
üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò:          18,200+ —Å—Ç—Ä–æ–∫

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –§–ê–ó–ê            ‚îÇ –§–ê–ô–õ–û–í   ‚îÇ –°–¢–†–û–ö     ‚îÇ –°–¢–ê–¢–£–°            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –§–∞–∑–∞ 1: v5.0    ‚îÇ 10       ‚îÇ 6,506     ‚îÇ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 100% ‚îÇ
‚îÇ –§–∞–∑–∞ 2: HISTOR  ‚îÇ 11       ‚îÇ 6,633     ‚îÇ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 100% ‚îÇ
‚îÇ –§–∞–∑–∞ 3: SRV-SYS ‚îÇ 3        ‚îÇ 5,700     ‚îÇ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 100% ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ò–¢–û–ì–û:          ‚îÇ 24       ‚îÇ 18,839    ‚îÇ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 100% ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –§–∞–∑—ã 3

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              –§–ê–ó–ê 3: SRV-SYS INTEGRATION                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üìÑ –§–ê–ô–õ–´:
  1. srv-sys-integrator.sh          1,100 —Å—Ç—Ä–æ–∫  Bash
  2. srv-sys-master.conf              600 —Å—Ç—Ä–æ–∫  Shell Config
  3. SRV_SYS_INTEGRATION_GUIDE.md  3,600 —Å—Ç—Ä–æ–∫  Markdown
  4. SRV_SYS_PHASE3_REPORT.md         400 —Å—Ç—Ä–æ–∫  Markdown
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  –ò–¢–û–ì–û:                            5,700 —Å—Ç—Ä–æ–∫

üéØ –§–£–ù–ö–¶–ò–û–ù–ê–õ:
  ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (35+ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π)
  ‚úÖ Service Registry (manifest.json)
  ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ (11 —Ç–∏–ø–æ–≤)
  ‚úÖ –ê–≤—Ç–æ–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (4 –º–æ–¥—É–ª—è)
  ‚úÖ –ê–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Nginx, MySQL, PostgreSQL, Redis)
  ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
  ‚úÖ Health Check —Å–∏—Å—Ç–µ–º–∞
  ‚úÖ Hooks System (pre/post deploy/update)
  ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
  ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
  ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
  ‚úÖ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

üìã –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø:
  ‚úÖ 600+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ master.conf
  ‚úÖ 14 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
  ‚úÖ 35+ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π
  ‚úÖ 30+ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤

üìñ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:
  ‚úÖ 8 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
  ‚úÖ 3 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∫–µ–π—Å–∞
  ‚úÖ 4 troubleshooting —Å—Ü–µ–Ω–∞—Ä–∏—è
  ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  ‚úÖ Best Practices
```

---

## üéì –ö–õ–Æ–ß–ï–í–´–ï –ò–ù–ù–û–í–ê–¶–ò–ò

### 1. –ï–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ /srv/sys/

**–î–û:**
```
–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ö—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –≥–¥–µ —Ö–æ—á–µ—Ç:
/etc/nginx/nginx.conf
/etc/mysql/my.cnf
/etc/iptables/rules.v4
/home/user/.ssh/config
```

**–ü–û–°–õ–ï:**
```
–í—Å—ë —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ /srv/sys/:
/srv/sys/configs/nginx/nginx.conf
/srv/sys/configs/mysql/custom.cnf
/srv/sys/iptables/v4/combined.v4
/srv/sys/ssh/win_config/config
```

### 2. Service Registry

**manifest.json** –∫–∞–∫ "–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö" —Å–∏—Å—Ç–µ–º—ã:
```json
{
  "components": {
    "nginx": {"enabled": true, "port": 80, "version": "1.18"},
    "mysql": {"enabled": true, "port": 3306},
    "ssh": {"enabled": true, "port": 2222, "gate_enabled": true}
  },
  "services": {
    "webapp": {"port": 8080, "status": "running"}
  },
  "ports": {
    "80": "nginx",
    "3306": "mysql",
    "2222": "ssh",
    "8080": "webapp"
  }
}
```

–õ—é–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç:
- –£–∑–Ω–∞—Ç—å –æ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–±—è
- –ü–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 3. –ê–≤—Ç–æ–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ö—É–∫–∏

```bash
# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç A –º–µ–Ω—è–µ—Ç SSH –ø–æ—Ä—Ç
sed -i 's/Port 22/Port 2222/' /etc/ssh/sshd_config

# Hook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
hooks/post-update/ssh-port-changed.sh
    ‚Üì
# –û–±–Ω–æ–≤–ª—è–µ—Ç iptables
/srv/sys/scripts/iptables-controller.sh --update-ssh-port 2222
    ‚Üì
# –û–±–Ω–æ–≤–ª—è–µ—Ç SID —Å–∏—Å—Ç–µ–º—É
/srv/sys/scripts/ssh-sid.sh --update-port 2222
    ‚Üì
# –û–±–Ω–æ–≤–ª—è–µ—Ç Win_Config
/srv/sys/scripts/win-config.sh --regenerate
    ‚Üì
# –û–±–Ω–æ–≤–ª—è–µ—Ç manifest.json
jq '.components.ssh.port = 2222' manifest.json
```

### 4. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–í–°–ï** –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ:
```
/srv/sys/logs/
‚îú‚îÄ‚îÄ integrator.log       # –î–µ–π—Å—Ç–≤–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ changes.log          # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ audit.log            # –ê—É–¥–∏—Ç (–∫—Ç–æ/—á—Ç–æ/–∫–æ–≥–¥–∞)
‚îú‚îÄ‚îÄ nginx-access.log     # Nginx access
‚îú‚îÄ‚îÄ nginx-error.log      # Nginx errors
‚îú‚îÄ‚îÄ mysql-error.log      # MySQL
‚îî‚îÄ‚îÄ postgresql.log       # PostgreSQL
```

### 5. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ö—É–∫–∏

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å = —Å–æ–∑–¥–∞—Ç—å —Ö—É–∫:
```bash
# –•–æ—Ç–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è
cat > /srv/sys/hooks/post-deploy/20-slack.sh <<'EOF'
#!/bin/bash
curl -X POST $SLACK_WEBHOOK \
    -d '{"text": "Deploy completed on '"$(hostname)"'"}'
EOF
chmod +x /srv/sys/hooks/post-deploy/20-slack.sh

# –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã
cp srv-sys-integrator.sh /root/
cp srv-sys-master.conf /root/
chmod +x /root/srv-sys-integrator.sh

# 2. –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
cd /root
./srv-sys-integrator.sh --init

# 3. –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
./srv-sys-integrator.sh --check  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
./srv-sys-integrator.sh --report # –û—Ç—á—ë—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
```

### –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
./srv-sys-integrator.sh

# –ò–ª–∏ —á–µ—Ä–µ–∑ CLI:
./srv-sys-integrator.sh --init     # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
./srv-sys-integrator.sh --check    # Health check
./srv-sys-integrator.sh --report   # –û—Ç—á—ë—Ç
./srv-sys-integrator.sh --backup   # –ë—ç–∫–∞–ø
./srv-sys-integrator.sh --sync     # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–≤–æ–∏ —Å–∫—Ä–∏–ø—Ç—ã

```bash
#!/bin/bash
# your_script.sh

# –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
source /srv/sys/srv-sys-master.conf

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
echo "SSH Port: $SRV_SYS_SSH_PORT"
echo "Nginx Config: $SRV_SYS_CONFIGS_NGINX"

# –ß–∏—Ç–∞–µ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç
if command -v jq &>/dev/null; then
    MYSQL_PORT=$(jq -r '.components.mysql.port' "$SRV_SYS_MANIFEST")
    echo "MySQL Port: $MYSQL_PORT"
fi

# –õ–æ–≥–∏—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏—è
echo "$(date) [INFO] Script executed" >> "$SRV_SYS_LOGS/custom.log"
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–°–æ–∑–¥–∞–Ω–Ω–∞—è –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞:

### –§–∞–∑–∞ 1: v5.0 Enhanced Edition
- **README_V5.md** ‚Äî –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å MC-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **CHANGELOG_V5.md** ‚Äî –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π v5.0
- **PROJECT_SUMMARY_V5.md** ‚Äî –ò—Ç–æ–≥–∏ —Ñ–∞–∑—ã 1

### –§–∞–∑–∞ 2: HISTOR Extensions
- **HISTOR_IMPLEMENTATION.md** ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¢–ó histor.txt
- **README_SSH_GATE.md** ‚Äî SSH Gate —Å–∏—Å—Ç–µ–º–∞
- **SECURITY_INTEGRATION_GUIDE.md** ‚Äî –ú–æ–¥—É–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **ADMIN_GUIDE_V2.md** ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –§–∞–∑–∞ 3: SRV-SYS Integration
- **SRV_SYS_INTEGRATION_GUIDE.md** ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (3600 —Å—Ç—Ä–æ–∫)
- **SRV_SYS_PHASE3_REPORT.md** ‚Äî –≠—Ç–æ—Ç –æ—Ç—á—ë—Ç

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- ‚úÖ **"–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –≥–ª—É–±–æ–∫–æ"** ‚Üí –ü—Ä–æ–≤–µ–¥—ë–Ω –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ **"–ü—Ä–µ–¥–ª–æ–∂–∏"** ‚Üí –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **"–†–µ–∞–ª–∏–∑—É–π"** ‚Üí –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω srv-sys-integrator.sh (1100 —Å—Ç—Ä–æ–∫)
- ‚úÖ **"–ì–∏–±–∫—É—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é"** ‚Üí srv-sys-master.conf (600 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
- ‚úÖ **"–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —Å–æ–±–æ–π"** ‚Üí Service Registry + –∞–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ **"–í—Å—ë –≤ –ø–∞–ø–∫–µ /srv/sys/"** ‚Üí –í—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ /srv/sys/

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ Health monitoring
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
- ‚úÖ Hooks System
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéØ –ò–¢–û–ì–ò

### –°–æ–∑–¥–∞–Ω–æ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                        | –°—Ç—Ä–æ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ                              |
|----------------------------------|-------|---------------------------------------|
| srv-sys-integrator.sh            | 1,100 | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä               |
| srv-sys-master.conf              | 600   | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è         |
| SRV_SYS_INTEGRATION_GUIDE.md     | 3,600 | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                   |
| SRV_SYS_PHASE3_REPORT.md         | 400   | –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç                       |
| **–ò–¢–û–ì–û:**                       | **5,700** | **4 —Ñ–∞–π–ª–∞**                       |

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ

‚úÖ **100% –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**  
‚úÖ **–†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**  
‚úÖ **–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**  
‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**  
‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**  

### –¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üéØ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:** –í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞  
üéØ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏—Å–∫–ª—é—á–∞–µ—Ç –æ—à–∏–±–∫–∏  
üéØ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
üéØ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:** Health checks –∏ –æ—Ç—á—ë—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã  
üéØ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –±—ç–∫–∞–ø—ã –∏ –∞—É–¥–∏—Ç  

---

## üåü –ß–¢–û –î–ê–õ–¨–®–ï?

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ**
   ```bash
   ./srv-sys-integrator.sh --init
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**
   ```bash
   # –ê–≤—Ç–æ–±—ç–∫–∞–ø—ã
   crontab -e
   # 0 2 * * * /root/srv-sys-integrator.sh --backup
   
   # –ê–≤—Ç–æsync
   # */5 * * * * /root/srv-sys-integrator.sh --sync
   ```

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram/Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å Prometheus metrics
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Grafana –¥–∞—à–±–æ—Ä–¥—ã

4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ**
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Docker
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD
   - Kubernetes integration

---

**¬© 2024 Sandrick Tech | SRV-SYS Integration System v1.0**

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û 100%**
